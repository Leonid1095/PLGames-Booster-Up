# PLGames Booster UP — Дорожная карта

> Детальная дорожная карта разработки от MVP до полноценного продукта.
> Каждый этап содержит конкретные задачи, критерии готовности и зависимости.

---

## Общий таймлайн

```
Phase 0: Подготовка инфраструктуры          [Неделя 1]
Phase 1: Бэкенд-API (ядро)                  [Недели 2–3]
Phase 2: Gateway Nodes (WireGuard)           [Неделя 3–4]
Phase 3: CLI-клиент + E2E тест              [Неделя 4–5]
Phase 4: Windows GUI-клиент                  [Недели 5–8]
Phase 5: Landing + Личный кабинет            [Недели 6–8]  (параллельно с Phase 4)
Phase 6: Мониторинг + Метрики                [Недели 8–9]
Phase 7: Биллинг + Подписки                  [Недели 9–10]
Phase 8: Админ-панель                        [Недели 10–11]
Phase 9: Тестирование + Закрытая бета        [Недели 11–12]
Phase 10: Публичный запуск MVP               [Неделя 12–13]
--- MVP READY ---
Phase 11: Telegram-бот                       [Месяц 4]
Phase 12: Benchmark + FPS Boost              [Месяц 4–5]
Phase 13: Android-клиент                     [Месяц 5–6]
Phase 14: Масштабирование                    [Месяц 6+]
```

---

## Phase 0: Подготовка инфраструктуры [Неделя 1]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 0.1 | Арендовать VPS для центрального сервера | DE (Франкфурт), 2 vCPU, 4 GB RAM, 40 GB SSD. Провайдер: Hetzner / Contabo | SSH-доступ работает |
| 0.2 | Арендовать VPS для gateway-узлов | DE, SE, US, LV — минимальные конфиги (1–2 vCPU, 2 GB RAM) | SSH-доступ ко всем 4 узлам |
| 0.3 | Настроить базовую безопасность серверов | UFW, fail2ban, SSH по ключу, отключить root password login | Все серверы защищены |
| 0.4 | Зарегистрировать домен | plgames.gg или plgamesbooster.com | DNS настроен, A-записи указывают на DE-сервер |
| 0.5 | Настроить SSL | Let's Encrypt (certbot) для домена | HTTPS работает |
| 0.6 | Инициализировать Git-репозиторий | Monorepo: `api/`, `web/`, `client/`, `gateway-agent/`, `docs/`, `infra/` | Репозиторий создан, .gitignore настроен |
| 0.7 | Настроить Docker Compose на центральном сервере | PostgreSQL 16, Redis 7, volumes для данных | `docker compose up` — БД и Redis работают |
| 0.8 | Создать CI/CD pipeline (базовый) | GitHub Actions: lint, test, build | Pipeline проходит на пустом проекте |

### Результат Phase 0:
- 5 серверов готовы к работе (1 центральный + 4 gateway)
- Домен + SSL
- Docker Compose с PostgreSQL + Redis
- Git-репозиторий с CI

---

## Phase 1: Бэкенд-API (ядро) [Недели 2–3]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 1.1 | Инициализировать FastAPI-проект | Структура: `api/app/`, routers, models, schemas, services, config | `uvicorn` стартует без ошибок |
| 1.2 | Настроить Alembic + модели SQLAlchemy | Модели: User, Node, GameProfile, Session, Subscription | Миграции применяются, таблицы создаются |
| 1.3 | Реализовать Auth модуль | POST /auth/register, /auth/login, /auth/refresh. JWT access+refresh. bcrypt хеширование | Регистрация и логин работают через curl |
| 1.4 | Реализовать CRUD для Games | GET /games, GET /games/{slug}, GET /games/search | Список игр возвращается, поиск работает |
| 1.5 | Реализовать CRUD для Nodes | GET /nodes (с метриками), внутренний API для обновления статуса узлов | Список узлов с пингом возвращается |
| 1.6 | Реализовать Sessions API | POST /sessions/start, POST /sessions/stop, GET /sessions/history | Сессия создаётся, WG-конфиг генерируется |
| 1.7 | WireGuard config generator | Генерация пар ключей (wg genkey/pubkey), формирование [Interface]+[Peer] конфига | Конфиг валиден для WireGuard |
| 1.8 | Реализовать Node peer management | При /sessions/start — добавить peer на узел через SSH/API агента. При /sessions/stop — удалить | Peer появляется на узле, трафик ходит |
| 1.9 | GET /me, базовый профиль | Профиль пользователя, план, статистика | Endpoint возвращает данные |
| 1.10 | Seed-данные | 50+ игровых профилей (CS2, Dota 2, Valorant, LoL, Fortnite, PUBG, Apex, WoW, etc.) с реальными IP/CIDR | GameProfiles в базе, CIDR валидны |
| 1.11 | Rate limiting + CORS | Redis-based rate limiter, CORS для фронтенда | Rate limit срабатывает, CORS настроен |
| 1.12 | Тесты API | pytest, минимум 80% покрытие для auth и sessions | Тесты проходят в CI |

### Зависимости:
- Phase 0 (серверы, БД, Redis)

### Результат Phase 1:
- Полностью рабочий REST API
- Auth с JWT
- CRUD для игр, узлов, сессий
- Генерация WireGuard-конфигов
- 50+ игровых профилей с реальными CIDR

---

## Phase 2: Gateway Nodes (WireGuard) [Недели 3–4]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 2.1 | Установить WireGuard на все 4 узла | `apt install wireguard`, генерация серверных ключей | `wg show` работает на каждом узле |
| 2.2 | Настроить wg0 интерфейсы | DE: 10.10.1.1/24, SE: 10.10.2.1/24, US: 10.10.3.1/24, LV: 10.10.4.1/24 | Интерфейсы up, IP назначены |
| 2.3 | Настроить NAT (iptables) | MASQUERADE для wg0 → eth0 | Трафик из WG-подсети выходит в интернет |
| 2.4 | Настроить sysctl | ip_forward, UDP буферы, conntrack, BBR | Все параметры применены, persist через sysctl.d |
| 2.5 | Создать gateway-agent | Python/Go скрипт на каждом узле: HTTP API на порту 8443 для управления peers | Агент стартует, отвечает на health-check |
| 2.6 | API агента: добавить/удалить peer | POST /peers (add), DELETE /peers/{pubkey} (remove) | Бэкенд может динамически добавлять peers |
| 2.7 | API агента: ping-monitor | Периодический пинг до игровых серверов (из GameProfile), отправка метрик | Метрики пинга приходят в центральный сервер |
| 2.8 | Безопасность агента | Mutual TLS или API-key между бэкендом и агентами | Агент не принимает запросы без авторизации |
| 2.9 | Автозапуск (systemd) | Systemd unit для wg-quick и gateway-agent | Сервисы переживают перезагрузку |
| 2.10 | E2E тест: туннель вручную | Подключиться с тестового ПК через WG к каждому узлу, проверить выход в интернет | Трафик идёт через каждый узел, IP на выходе — IP узла |

### Зависимости:
- Phase 0 (серверы)
- Phase 1.7–1.8 (генерация конфигов, peer management)

### Результат Phase 2:
- 4 рабочих WireGuard-узла
- Динамическое управление peers через API
- NAT, мониторинг пинга
- Проверено: трафик ходит через каждый узел

---

## Phase 3: CLI-клиент + E2E тест [Недели 4–5]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 3.1 | Написать CLI-клиент (Python) | Минимальный скрипт: логин → выбор игры → выбор узла → получение конфига → поднять WG → добавить маршруты | Скрипт работает на Windows |
| 3.2 | Реализовать split-tunneling в CLI | `route add <game_ip> mask 255.255.255.255 <wg_gateway>` для каждого IP из профиля | Только игровой трафик через туннель |
| 3.3 | Замер пинга ДО и ПОСЛЕ | ICMP ping до game server IP без туннеля и с туннелем | Значения выводятся, видна разница |
| 3.4 | Полный E2E тест с реальной игрой | Подключиться через CLI, запустить CS2/Dota 2/LoL, проверить пинг в игре | Игра работает, пинг соответствует ожиданиям |
| 3.5 | Тест всех 4 узлов | Повторить E2E для DE, SE, US, LV | Все узлы работают корректно |
| 3.6 | Тест обхода блокировок | Проверить доступ к заблокированным в РФ игровым серверам через узлы | Доступ к заблокированным ресурсам работает |
| 3.7 | Нагрузочный тест | Подключить 10–20 одновременных peers, замерить деградацию | Пинг не деградирует значительно |

### Зависимости:
- Phase 1 (API полностью)
- Phase 2 (узлы полностью)

### Результат Phase 3:
- Рабочий CLI-клиент
- Подтверждённый E2E: API → WG-туннель → split-tunnel → игра работает
- Все 4 узла протестированы
- Обход блокировок подтверждён
- **Это ключевой milestone — вся backend-логика работает**

---

## Phase 4: Windows GUI-клиент [Недели 5–8]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 4.1 | Инициализировать Tauri + React проект | Tauri 2.x, React 18+, TypeScript, Tailwind CSS, React Router | `npm run tauri dev` стартует |
| 4.2 | Дизайн UI (Figma) | Макеты всех экранов: Auth, Dashboard, GameList, Connection, ActiveSession, Settings, Subscription | Утверждённые макеты в Figma |
| 4.3 | Экран авторизации | Форма логина (email/пароль), ссылка на регистрацию, JWT хранение | Логин работает, токен сохраняется |
| 4.4 | Экран списка игр | Карточки игр с иконками, поиск, категории, бейджи | Список загружается из API, поиск работает |
| 4.5 | Экран подключения | Список узлов с пингом, кнопка "Играть с ускорением", авто-выбор | Узлы отображаются с реальным пингом |
| 4.6 | Интеграция WireGuard (Rust) | wireguard-nt через Tauri Rust backend, поднятие/опускание туннеля | Туннель поднимается/опускается из GUI |
| 4.7 | Split-tunneling (Rust) | Управление маршрутами Windows через WinAPI | Только game IPs через туннель |
| 4.8 | Dashboard активной сессии | Пинг в реальном времени, график, потери, jitter, схема маршрута, сравнение ДО/ПОСЛЕ | Метрики обновляются в реальном времени |
| 4.9 | Экран настроек | Автозапуск, язык (RU/EN), тема (тёмная/светлая), логи | Настройки сохраняются и применяются |
| 4.10 | Авто-детект игр | Мониторинг процессов Windows, сопоставление с GameProfile.executable_names | Popup при запуске игры |
| 4.11 | Авто-запуск игры | После подключения — запуск .exe по сохранённому пути | Игра запускается автоматически |
| 4.12 | System tray | Минимизация в трей, контекстное меню: статус, подключить/отключить, выход | Иконка в трее работает |
| 4.13 | Автообновление | Tauri built-in updater, проверка новых версий при старте | Обновление скачивается и устанавливается |
| 4.14 | Инсталлятор | NSIS или WiX через Tauri bundler, .msi/.exe | Установка/удаление через стандартный Windows installer |
| 4.15 | Подписание кода (опционально) | Code signing certificate для Windows | Нет предупреждений SmartScreen (если сертификат есть) |

### Зависимости:
- Phase 3 (подтверждённый E2E)

### Результат Phase 4:
- Полнофункциональный Windows-клиент
- Все экраны реализованы
- WireGuard + split-tunneling работают
- Инсталлятор готов

---

## Phase 5: Landing + Личный кабинет [Недели 6–8] (параллельно с Phase 4)

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 5.1 | Инициализировать Next.js проект | Next.js 14+, App Router, Tailwind CSS, i18n (RU/EN) | `npm run dev` стартует |
| 5.2 | Hero-секция | Заголовок, подзаголовок, CTA кнопки, фоновое изображение/анимация | Секция отображается, кнопки кликабельны |
| 5.3 | "Как это работает" | Схема маршрута, 3 шага с иконками | Секция информативна и понятна |
| 5.4 | Секция "Поддерживаемые игры" | Сетка логотипов игр (из API или статично) | Логотипы отображаются |
| 5.5 | Секция "Преимущества" | 6 карточек с иконками | Секция верстается корректно |
| 5.6 | Секция "Тарифы" | Таблица тарифов: Trial, Monthly, Quarterly, Yearly | Цены отображаются, кнопки ведут на оплату |
| 5.7 | FAQ | Аккордеон с вопросами и ответами | Аккордеон работает |
| 5.8 | Footer | Контакты, ссылки, Telegram, Discord | Footer отображается |
| 5.9 | Страница регистрации | Форма: email, пароль, подтверждение | Регистрация через API работает |
| 5.10 | Личный кабинет: Dashboard | Текущий план, статистика, последние сессии | Данные загружаются из API |
| 5.11 | Личный кабинет: История сессий | Таблица: дата, игра, узел, время, средний пинг | История отображается |
| 5.12 | Личный кабинет: Подписка | Текущий план, кнопка продления, **кнопка отмены** | Управление подпиской работает |
| 5.13 | Личный кабинет: Настройки профиля | Смена пароля, привязка Telegram | Настройки сохраняются |
| 5.14 | Страница скачивания | Кнопка скачивания клиента, системные требования, инструкция | Файл скачивается |
| 5.15 | SEO + Meta tags | OG-теги, description, keywords для РФ-аудитории | Мета-теги корректны, страница индексируется |
| 5.16 | Мини speed-test на лендинге | WebSocket пинг до наших узлов | Пинг отображается в реальном времени |
| 5.17 | Деплой (Docker + Nginx) | Next.js в Docker, Nginx reverse proxy, SSL | Сайт доступен по домену |

### Зависимости:
- Phase 1 (API для данных)
- Phase 0 (домен, SSL)

### Результат Phase 5:
- Рабочий лендинг с SEO
- Личный кабинет с историей и управлением подпиской
- Страница скачивания клиента

---

## Phase 6: Мониторинг + Метрики [Недели 8–9]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 6.1 | Настроить Prometheus | Docker-контейнер, scrape config для всех узлов | Prometheus собирает метрики |
| 6.2 | Настроить Grafana | Docker, дашборды: узлы, пинг, загрузка, пользователи | Дашборды отображают данные |
| 6.3 | Метрики gateway-агентов | Экспорт в Prometheus: RTT, loss, peers, bandwidth | Метрики в Grafana |
| 6.4 | Алерты | Prometheus alertmanager → Telegram: узел down, high loss, high RTT | Алерты приходят в Telegram |
| 6.5 | Клиентские метрики | API endpoint для приёма метрик от клиентов, агрегация в Redis | Метрики от клиентов сохраняются |
| 6.6 | Дашборд "Здоровье системы" | Общий дашборд: все узлы, все игры, средний пинг, активные сессии | Дашборд в Grafana |

### Зависимости:
- Phase 2 (gateway-агенты)
- Phase 1 (API)

### Результат Phase 6:
- Prometheus + Grafana с полным мониторингом
- Алерты в Telegram
- Видимость здоровья всей системы

---

## Phase 7: Биллинг + Подписки [Недели 9–10]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 7.1 | Интеграция Robokassa | Для РФ-пользователей: карты, СБП | Тестовый платёж проходит |
| 7.2 | Интеграция Stripe | Для международных пользователей | Тестовый платёж проходит |
| 7.3 | Интеграция Cryptomus (опц.) | Крипто-платежи: USDT, BTC | Тестовый платёж проходит |
| 7.4 | Webhook обработка | Обработка уведомлений от платёжных систем, обновление подписки | Подписка активируется после оплаты |
| 7.5 | Trial логика | 7 дней бесплатно при регистрации, без карты | Trial активируется, истекает через 7 дней |
| 7.6 | Автопродление | Уведомление за 3 дня до окончания, автосписание (с согласия) | Уведомление приходит, оплата проходит |
| 7.7 | Отмена подписки | Одна кнопка в кабинете, подписка работает до конца оплаченного периода | Отмена работает без скрытых шагов |
| 7.8 | Ограничение доступа | Без подписки: /sessions/start возвращает 403 + сообщение | Неоплаченные пользователи не могут подключиться |
| 7.9 | История платежей | GET /payments/history в API и в личном кабинете | История отображается |

### Зависимости:
- Phase 1 (API)
- Phase 5 (личный кабинет)

### Результат Phase 7:
- 2–3 способа оплаты (Robokassa, Stripe, крипто)
- Trial 7 дней
- Прозрачное управление подпиской

---

## Phase 8: Админ-панель [Недели 10–11]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 8.1 | Страница пользователей | Список, поиск, фильтры (план, статус), детали пользователя | Админ видит всех пользователей |
| 8.2 | Страница узлов | Статус всех узлов, кнопки вкл/выкл, приоритет, загрузка | Управление узлами работает |
| 8.3 | Страница игровых профилей | CRUD для GameProfile: добавить игру, редактировать CIDR/порты, загрузить иконку | Профили можно создавать и редактировать |
| 8.4 | Страница сессий | Активные и завершённые сессии, фильтры | Сессии отображаются |
| 8.5 | Страница подписок | Список подписок, ручное управление (продлить, отменить) | Ручное управление работает |
| 8.6 | Встроенный Grafana | Embed Grafana дашборды в админку | Графики видны в админке |
| 8.7 | Роли доступа | Admin, Support (read-only кроме подписок) | Разграничение прав работает |

### Зависимости:
- Phase 1 (API)
- Phase 6 (мониторинг)

### Результат Phase 8:
- Полнофункциональная админ-панель
- Управление всеми сущностями
- Встроенный мониторинг

---

## Phase 9: Тестирование + Закрытая бета [Недели 11–12]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 9.1 | Интеграционные тесты | E2E тесты: регистрация → оплата → подключение → игра → отключение | Все сценарии проходят |
| 9.2 | Нагрузочное тестирование | 50–100 одновременных подключений на каждый узел | Система стабильна, пинг не деградирует |
| 9.3 | Тестирование с реальными играми | CS2, Dota 2, Valorant, LoL, Fortnite, PUBG, Apex — на всех узлах | Все игры работают через все узлы |
| 9.4 | Тестирование обхода блокировок | С российского IP — доступ к заблокированным ресурсам | Блокировки обходятся |
| 9.5 | Тестирование биллинга | Полный цикл: trial → оплата → продление → отмена | Все финансовые сценарии работают |
| 9.6 | Баг-фиксы | Исправление найденных багов | Критических багов нет |
| 9.7 | Закрытая бета (10–30 пользователей) | Раздать доступ друзьям/знакомым-геймерам, собрать фидбек | Фидбек собран, критические проблемы решены |
| 9.8 | Юридические документы | Политика конфиденциальности, оферта, правила использования | Документы на сайте |

### Зависимости:
- Все предыдущие фазы

### Результат Phase 9:
- Система протестирована под нагрузкой
- Закрытая бета пройдена
- Критические баги исправлены

---

## Phase 10: Публичный запуск MVP [Неделя 12–13]

### Задачи

| # | Задача | Детали | Критерий готовности |
|---|--------|--------|---------------------|
| 10.1 | Финальная проверка всех компонентов | Чеклист: API, узлы, клиент, лендинг, биллинг, мониторинг | Все компоненты работают |
| 10.2 | Настроить бэкапы | PostgreSQL daily backup, конфиги WG | Бэкапы работают и проверены |
| 10.3 | Настроить логирование | Centralized logging (journalctl + отправка в Grafana Loki или аналог) | Логи доступны |
| 10.4 | Подготовить support-каналы | Telegram-группа, email support | Каналы работают |
| 10.5 | Маркетинговый launch | Посты в Telegram-каналах, Reddit (r/gaming, r/pikabu), форумы | Первые пользователи приходят |
| 10.6 | Мониторинг первых дней | 24/7 мониторинг алертов, быстрая реакция на проблемы | Система стабильна |

### Результат Phase 10:
- **MVP запущен публично**
- Пользователи регистрируются, оплачивают, играют

---

## === MVP ГОТОВ ===

---

## Phase 11: Telegram-бот [Месяц 4]

### Задачи

| # | Задача | Детали |
|---|--------|--------|
| 11.1 | Базовый бот (aiogram 3) | Команды: /start, /status, /subscribe, /help |
| 11.2 | Привязка аккаунта | Связать Telegram ID с аккаунтом PLGames |
| 11.3 | Статус подписки | Показать план, дату окончания, остаток trial |
| 11.4 | Быстрый конфиг | Генерация WG-конфига через бота (для ручного использования) |
| 11.5 | Уведомления | Напоминание об окончании подписки, проблемы с узлами |
| 11.6 | Реферальная программа | Реферальная ссылка, бонус за приглашение (доп. дни trial) |

---

## Phase 12: Benchmark + FPS Boost [Месяц 4–5]

### Задачи

| # | Задача | Детали |
|---|--------|--------|
| 12.1 | Benchmark-режим в клиенте | Замер пинга ДО/ПОСЛЕ с графиком сравнения |
| 12.2 | Benchmark API | Сохранение и агрегация результатов, средние по играм |
| 12.3 | Benchmark на лендинге | "Средние результаты наших пользователей" с реальными данными |
| 12.4 | FPS Boost модуль | Оптимизация Windows: приоритеты процессов, отключение Game Bar/DVR, CPU parking |
| 12.5 | Настройки FPS Boost | Включить/выключить, выбор оптимизаций |

---

## Phase 13: Android-клиент [Месяц 5–6]

### Задачи

| # | Задача | Детали |
|---|--------|--------|
| 13.1 | Инициализировать проект | Kotlin + Jetpack Compose или React Native |
| 13.2 | Auth + список игр | Порт функционала с Windows-клиента |
| 13.3 | WireGuard интеграция | Использование WireGuard Android API |
| 13.4 | Split-tunneling | Android VPN API с per-app filtering |
| 13.5 | Dashboard сессии | Пинг, потери, график |
| 13.6 | Публикация | Google Play Store (или APK на сайте) |

---

## Phase 14: Масштабирование [Месяц 6+]

### Задачи

| # | Задача | Детали |
|---|--------|--------|
| 14.1 | Дополнительные узлы | Финляндия, Нидерланды, Польша — расширение EU покрытия |
| 14.2 | Авто-масштабирование | Скрипты для быстрого развёртывания новых узлов |
| 14.3 | Packet Redundancy (v2 протокол) | Надстройка над WireGuard: дупликация UDP-пакетов |
| 14.4 | Obfuscation layer | obfs4/shadowsocks wrapper для обхода DPI-блокировки WireGuard |
| 14.5 | Роутер-плагин | Прошивка для ASUS/OpenWRT роутеров |
| 14.6 | macOS-клиент | Tauri сборка под macOS |
| 14.7 | Реферальная система v2 | Комиссия за привлечённых пользователей |
| 14.8 | Партнёрства | Интеграция с кибер-турнирами, стриминг-площадками |

---

## Структура репозитория (Monorepo)

```
plgames-booster-up/
├── docs/                          # Документация проекта
│   ├── 01-competitive-analysis.md
│   ├── 02-enhanced-specification.md
│   └── 03-roadmap.md
├── api/                           # FastAPI бэкенд
│   ├── app/
│   │   ├── main.py
│   │   ├── config.py
│   │   ├── models/                # SQLAlchemy модели
│   │   ├── schemas/               # Pydantic схемы
│   │   ├── routers/               # API endpoints
│   │   ├── services/              # Бизнес-логика
│   │   ├── utils/                 # Утилиты (WG keygen, etc.)
│   │   └── migrations/            # Alembic
│   ├── tests/
│   ├── Dockerfile
│   └── requirements.txt
├── web/                           # Next.js (лендинг + кабинет)
│   ├── src/
│   │   ├── app/                   # App Router
│   │   ├── components/
│   │   ├── lib/
│   │   └── i18n/
│   ├── public/
│   ├── Dockerfile
│   └── package.json
├── client/                        # Tauri + React (Windows клиент)
│   ├── src/                       # React frontend
│   ├── src-tauri/                 # Rust backend
│   │   ├── src/
│   │   │   ├── main.rs
│   │   │   ├── wireguard.rs       # WG управление
│   │   │   ├── routes.rs          # Split-tunneling
│   │   │   └── process_monitor.rs # Авто-детект игр
│   │   └── Cargo.toml
│   └── package.json
├── gateway-agent/                 # Агент для gateway-узлов
│   ├── agent.py (или main.go)
│   ├── config.yaml
│   ├── Dockerfile
│   └── systemd/
│       └── gateway-agent.service
├── bot/                           # Telegram-бот (Phase 11)
│   ├── bot.py
│   ├── handlers/
│   └── Dockerfile
├── infra/                         # Инфраструктура
│   ├── docker-compose.yml         # Центральный сервер
│   ├── docker-compose.prod.yml
│   ├── nginx/
│   │   └── nginx.conf
│   ├── prometheus/
│   │   └── prometheus.yml
│   ├── grafana/
│   │   └── dashboards/
│   └── scripts/
│       ├── setup-gateway.sh       # Скрипт настройки нового узла
│       └── backup.sh
├── .github/
│   └── workflows/
│       ├── api-ci.yml
│       ├── web-ci.yml
│       └── client-ci.yml
├── .gitignore
├── .env.example
└── README.md
```

---

## Метрики успеха MVP

| Метрика | Целевое значение |
|---------|-----------------|
| Время от регистрации до первого подключения | < 3 минут |
| Снижение пинга (среднее) | > 30% |
| Потери пакетов через наши узлы | < 0.5% |
| Uptime узлов | > 99.5% |
| Конверсия trial → платная подписка | > 15% |
| Время ответа API (p95) | < 200ms |
| Размер инсталлятора клиента | < 30 MB |
| Потребление RAM клиентом | < 100 MB |

---

## Бюджет инфраструктуры (оценка MVP)

| Ресурс | Цена/мес |
|--------|----------|
| VPS центральный (DE, 2vCPU/4GB) | ~$8–15 |
| VPS gateway DE (2vCPU/4GB) | ~$8–15 |
| VPS gateway SE (1vCPU/2GB) | ~$4–8 |
| VPS gateway US (2vCPU/2GB) | ~$6–12 |
| VPS gateway LV (1vCPU/2GB) | ~$4–8 |
| Домен (.gg или .com) | ~$1–5 |
| **Итого** | **~$31–63/мес** |

При средней подписке $5/мес — окупаемость с 7–13 платящих пользователей.

---

## Критический путь (зависимости)

```
Phase 0 ──→ Phase 1 ──→ Phase 2 ──→ Phase 3 (E2E подтверждение)
                                          │
                                          ├──→ Phase 4 (GUI клиент)
                                          │         │
                                          ├──→ Phase 5 (Landing)  ←── (параллельно)
                                          │         │
                                          │         ├──→ Phase 7 (Биллинг)
                                          │         │
                                          ├──→ Phase 6 (Мониторинг)
                                          │         │
                                          │         ├──→ Phase 8 (Админка)
                                          │         │
                                          └─────────┴──→ Phase 9 (Тестирование)
                                                              │
                                                              └──→ Phase 10 (LAUNCH)
```

**Phase 3 — главный milestone.** Если E2E не работает, всё остальное бессмысленно.
**Phase 4 и Phase 5 — параллельные.** Можно разрабатывать одновременно.
**Phase 7 блокирует Phase 9.** Без биллинга нельзя тестировать полный цикл.
